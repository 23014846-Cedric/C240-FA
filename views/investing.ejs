<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Investing Coach</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/styles.css">

  <style>
    /* Video container styling */
    .video-wrapper {
      position: relative;
      width: 100%;
      padding-top: 56.25%; /* 16:9 */
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid #233055;
      background: #0b132b;
    }

    .video-wrapper video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <%- include("partials/navbar") %>
  <div class="container">

    <header class="page-header">
      <h1>Investing Coach</h1>
      <p class="subtitle">Simple ETF-based investing guidance for beginners.</p>
    </header>

    <!-- Walkthrough Video -->
    <div class="card">
      <h3 class="card-title">üì∫ How to Use Investing Coach</h3>

      <div class="video-wrapper">
        <video controls preload="metadata">
          <source src="videos/Investing Coach Guide.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>

    <!-- Inputs -->
    <div class="card">
      <h3 class="card-title">Your Inputs</h3>

      <div class="form-grid">
        <div>
          <label for="goal">Investment Goal</label>
          <select id="goal">
            <option value="long">Long-term (10+ years)</option>
            <option value="mid">Medium-term (5‚Äì10 years)</option>
            <option value="short">Short-term (0‚Äì5 years)</option>
          </select>
        </div>

        <div>
          <label for="risk">Risk Tolerance</label>
          <select id="risk">
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </div>

        <div class="full">
          <label for="amount">Monthly Investment (SGD)</label>
          <input type="number" id="amount" value="300" min="0">
        </div>
      </div>

      <div class="actions">
        <button type="button" onclick="generate()">Generate Plan</button>
        <button type="button" class="btn-secondary" onclick="copyPlan()">Copy Plan</button>
      </div>

      <div id="toast" class="toast" aria-live="polite"></div>
    </div>

    <!-- Plan -->
    <div class="card">
      <div class="plan-header">
        <h3 class="card-title">Your Plan</h3>
        <span class="badge">Educational</span>
      </div>
      <pre id="plan">Click ‚ÄúGenerate Plan‚Äù to create a plan.</pre>
    </div>
  </div>

  <script>
    function generate() {
      const goal = document.getElementById("goal").value;
      const risk = document.getElementById("risk").value;
      const amt = document.getElementById("amount").value;

      const equityPct = risk === "high"
        ? "80‚Äì100%"
        : risk === "medium"
          ? "60‚Äì70%"
          : "40‚Äì50%";

      document.getElementById("plan").textContent =
`Profile Summary
----------------
Goal: ${goal}
Risk: ${risk}

Suggested Simple Portfolio
- Equity ETFs: ${equityPct}
- Bond Funds: remainder
- Cash: small buffer

Step-by-step:
1. Open brokerage account
2. Buy ETFs monthly (DCA)
3. Invest SGD ${amt}/month
4. Rebalance once a year

(Educational only, not financial advice)`;
    }

    async function copyPlan() {
      const planText = document.getElementById("plan").textContent || "";
      if (!planText.trim()) return;

      const toast = document.getElementById("toast");
      try {
        await navigator.clipboard.writeText(planText);
        toast.textContent = "Copied to clipboard ‚úÖ";
      } catch (e) {
        const temp = document.createElement("textarea");
        temp.value = planText;
        document.body.appendChild(temp);
        temp.select();
        document.execCommand("copy");
        document.body.removeChild(temp);
        toast.textContent = "Copied ‚úÖ";
      }

      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 1400);
    }
  </script>
</body>
</html>
